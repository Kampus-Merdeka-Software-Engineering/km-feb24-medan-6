<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chart.js Example</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="grid-item col-6">
    <p>Total profit in Europe</p>
    <canvas id="myChart"></canvas>
  </div>

  <script>
    const jsonData = [
      {
        "Date": "1/1/2013",
        "Day": 1,
        "Month": "January",
        "Year": 2013,
        "Customer_Age": 53,
        "Age_Group": "Adults (35-64)",
        "Customer_Gender": "F",
        "Country": "France",
        "State": "Seine (Paris)",
        "Product_Category": "Bikes",
        "Sub_Category": "Road Bikes",
        "Product": "Road-250 Black, 44",
        "Order_Quantity": 1,
        "Unit_Cost": 1555,
        "Unit_Price": 2443,
        "Profit": 888,
        "Cost": 1555,
        "Revenue": 2443
      },
      {
        "Date": "7/1/2013",
        "Day": 7,
        "Month": "January",
        "Year": 2013,
        "Customer_Age": 41,
        "Age_Group": "Adults (35-64)",
        "Customer_Gender": "M",
        "Country": "France",
        "State": "Seine (Paris)",
        "Product_Category": "Bikes",
        "Sub_Category": "Road Bikes",
        "Product": "Road-250 Black, 58",
        "Order_Quantity": 1,
        "Unit_Cost": 1555,
        "Unit_Price": 2443,
        "Profit": 888,
        "Cost": 1555,
        "Revenue": 2443
      },
      {
        "Date": "8/1/2013",
        "Day": 8,
        "Month": "January",
        "Year": 2013,
        "Customer_Age": 30,
        "Age_Group": "Young Adults (25-34)",
        "Customer_Gender": "F",
        "Country": "France",
        "State": "Seine Saint Denis",
        "Product_Category": "Bikes",
        "Sub_Category": "Mountain Bikes",
        "Product": "Mountain-400-W Silver, 40",
        "Order_Quantity": 1,
        "Unit_Cost": 420,
        "Unit_Price": 769,
        "Profit": 349,
        "Cost": 420,
        "Revenue": 769
      }
    ];

    // Mengumpulkan total profit berdasarkan negara
    const profitData = jsonData.reduce((acc, item) => {
      if (!acc[item.Country]) {
        acc[item.Country] = 0;
      }
      acc[item.Country] += item.Profit;
      return acc;
    }, {});

    // Membuat arrays untuk labels dan data
    const labels = Object.keys(profitData);
    const data = Object.values(profitData);

    // Mengubah chart untuk menggunakan data dari JSON
    const ctx1 = document.getElementById('myChart').getContext('2d');
    new Chart(ctx1, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: '# Profit',
          data: data,
          borderWidth: 1
        }]
      },
      options: {
        indexAxis: 'y',
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  </script>
</body>
</html>
